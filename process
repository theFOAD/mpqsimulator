1>player who owns turn swaps two tiles (t1 and t2) [the result must always
  be a match]
 >other player gets the next turn
  2.1>t1 is part of a match [t2 might be part of one as well] [A]
     >mark the matching agent as instigator [B]
    2.1.1>mark the entire match t1 is a part of
      2.1.1.1>do the marked matches contain a match-5?
             >yes: current player get the next turn [no: turn ownership
              doesn't change: nul op]
             >determine the entire set of tiles to be destroyed by the
              marked matches
             >determine criticals to be created by the marked matches [C]
             >calculate the match damage including modifiers based on the
              agent owning each marked match
             >destroy the determined tiles
             >apply calculated match damage to the relevant enemy agent
             >apply gravity
             >determine all matches on board
        2.1.1.1.1>there are matches
               >mark all matches
               >go to 2.1.1.1
        2.1.1.1.2>there are no matches
               >is the player player 1?
               >yes: put the instigator in front [no: agents stay where they
                are: nul op]
               >go to 1
  2.2>only t2 is part of a match
     >remap t1 and t2, go to 2.1

A
t1 is part of a match

This is clear in most cases. When t1 is a critical and only one color is matched, that color is the only match color. However, when t1 is a critical and more than one color is matched, I do not know what MPQ does. My _assumption_ is that all matched colors count as part of the first match, and that they resolve at the same time [confirmed!]. Two differently-colored match-3s do not add up to a match-5 however (for example).

B
mark the matching agent as instigator

This is clear in most cases. When t1 is a critical and only one color is matched, that color determines the matching agent. However, when t1 is a critical and more than one color is matched, I do not know what MPQ does. My _assumption_ is that the highest matching color determines the instigator. If more than one color has the highest value, I will assume the tankiest agent is the instigator.

C
determine criticals to be created by the marked matches

Every match generates only 1 critical. As far as I can tell, the critical's location is determined as follows
1>is there a horizontal sub-match?
  1.1>yes: find the lowest line containing 1 or more of such matches [there
      could be 2 of them...]
     >is there a crossing?
    1.1.1>yes: put the critical on the crossing closest to the center; pick
          the left one if it's a draw
    1.1.2>no [it's just a horizontal 5+-match]: put the critical on the tile
          closest to the center; pick the left one if it's a draw
  2.1>no: [it's just a vertical 5+ match]: put the critical on the tile
          closest to the center; pick the higher one if it's a draw
